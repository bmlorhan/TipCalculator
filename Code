'''

Simple Tip Calculator

Notes:

simple tip calculator
use -
user enters bill amount and receives a tip amount based on tip percentage

problems:
No option does not determine a new tip amount after re-rating the server. -  CONQUERED!

'''


import sys


''' Function Payment
#The main function
#Check to see if the tip has been calculated using var tipCalculated
#asks for the bill amount
#asks for a rating, later used to determine the tipPercent
#runs the Tip function using the entered rating
#the function returns a tipPercent
#as long as tipCalculated is False
#Asks for confirmation that the tip is okay.
#If yes, runs the Calculator function using the entered values and produces the tip + total bill
#Returns tipCalculated as True, ending the application.
#If no, user will be asked to re-rate their server
#This will continue until the user is satsified with the tip and accepts, enters Yes
'''


def Payment(tipCalculated):
    if tipCalculated is False:
        billAmount = input("What is your bill? ")
        rating = input("How would you rate your server 1 to 5? ")

        Tip(rating)
        tipPercent = Tip(rating)

        while tipCalculated is False:
            tipOK = str(input("You will tip " + str(int(float(tipPercent * 100))) + "%. Is that okay? "))
            if tipOK == str("yes") or tipOK == str("y"):
                Calculator(billAmount,tipPercent)
                tipCalculated = True
                break
            if tipOK == str("no") or  tipOK == str("n"):
                rating = input("How would you rate your server 1 to 5? ")
                Tip(rating)
                tipPercent = Tip(rating)
                tipCalculated = False

''' Function Calculator
#Calculator figures out the tip amount
#and the informing how much the tip is
#and what the overall total is.
'''


def Calculator(billAmount, tipPercent):

    tipAmount = float(billAmount) * float(tipPercent)
    
    total = float(billAmount) + float(tipAmount)
    print("Please add ${0}".format(tipAmount) + " for a total of ${0}".format(total))

    tipCalculated = True
    return tipCalculated

''' Function Tip
#This is rating. Rating is translated into a
#tipPercent that is used to calculate the
#over all tip amount.
'''


def Tip(rating):
    tipPercent = float(0)

    if rating == "1":
        tipPercent = round(float(10), 2) * float(0.01)
    if rating == "2":
        tipPercent = round(float(13), 2) * float(0.01)
    if rating == "3":
        tipPercent = round(float(15), 2) * float(0.01)
    if rating == "4":
        tipPercent = round(float(16), 2) * float(0.01)
    if rating == "5":
        tipPercent = round(float(19), 2) * float(0.01)
    return tipPercent

###========================================================================###
'''
#Creates var tipCalculated and sets to False
#Whenever tipCalculated is False
#Run Payment function, checking for tipCalculated to be False
#Checks for tipCalculated to be True
'''


tipCalculated = False
if tipCalculated is False:
    Payment(tipCalculated)
